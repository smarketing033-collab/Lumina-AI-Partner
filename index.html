<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lumina AI â€” Trading Assistant (Auto + Manual + EA)</title>
  <meta name="description" content="Lumina AI with Auto/Manual mode for forex trading. Full analysis, EA trading with SL/TP and exit options. Assistant chat with voice." />
  <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
  <style>
    /* Styles (Keep it clean and simple) */
    :root{
      --bg:#071023; --panel:#071428; --muted:#9fb0c8; --accent:#39d353; --danger:#ff4d4f;
    }
    * { box-sizing: border-box }
    body { margin: 0; font-family: Arial, Helvetica, sans-serif; background: var(--bg); color: #e6f0fb; }
    .wrap { display: grid; grid-template-columns: 1fr 380px; gap: 12px; height: 100vh; padding: 12px; }
    .top { display: flex; gap: 8px; padding: 10px; align-items: center; }
    select, input, button { padding: 8px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.06); background: transparent; color: inherit; }
    .card { background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent); padding: 12px; border-radius: 12px; box-shadow: 0 8px 30px rgba(2,6,23,0.6); border: 1px solid rgba(255,255,255,0.02); }
    .btn { padding: 8px 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.04); cursor: pointer; background: transparent; }
    .signal { padding: 8px; border-bottom: 1px solid rgba(255,255,255,0.02); display: flex; justify-content: space-between; }
    #luminaBtn { position: fixed; right: 18px; bottom: 18px; width: 64px; height: 64px; border-radius: 18px; background: linear-gradient(90deg,#ff758c,#7c5cff); display: flex; align-items: center; justify-content: center; color: #fff; font-weight: 700; border: none; z-index: 2000; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
    #luminaPanel { position: fixed; right: 0; top: 0; height: 100%; width: 420px; max-width: 95%; background: var(--panel); box-shadow: -20px 0 60px rgba(0,0,0,0.6); transform: translateX(110%); transition: transform .28s ease-in-out; z-index: 1999; padding: 12px; overflow: auto; }
    #luminaPanel.open { transform: translateX(0); }
    footer.note { color: var(--muted); font-size: 13px; padding: 8px; text-align: center; }
  </style>
</head>
<body>

<!-- Mobile + Desktop Mode Toggle -->
<button id="toggleView" class="btn">Mobile Mode</button>

<div class="wrap">
  <!-- Left Section -->
  <div class="left">
    <div class="card top">
      <div>
        <div>
          <strong>Balance / Mode</strong>
          <div id="modeLabel">DEMO</div> â€” Balance: <span id="balance">$50,000</span>
        </div>
        <select id="pairSelect"></select>
        <select id="timeframeSelect">
          <option value="1">1S</option><option value="60" selected>1M</option><option value="300">5M</option><option value="900">15M</option>
          <option value="3600">1H</option><option value="14400">4H</option><option value="86400">1D</option><option value="604800">1W</option><option value="2592000">1M</option><option value="31536000">1Y</option>
        </select>
        <button id="demoBtn" class="btn">DEMO</button>
        <button id="realBtn" class="btn">REAL</button>
      </div>
    </div>

    <!-- Chart Section -->
    <div class="card" id="chartCard">
      <div id="chartArea">
        <div id="chart"></div>
      </div>
      <div>
        <label class="small">Indicators</label>
        <select id="indicatorSelect"></select>
      </div>
    </div>

    <!-- Signals + Controls -->
    <div class="card">
      <div>
        <strong>Live Signal Panel / Trade Controls</strong>
        <div class="small">Signals for selected pair & timeframe</div>
      </div>
      <button id="buyBtn" class="btn">Sim BUY</button>
      <button id="sellBtn" class="btn">Sim SELL</button>
      <input id="vol" placeholder="lot e.g. 0.01" style="width:110px"/>
      <input id="sl" placeholder="SL (price)" style="width:120px"/>
      <input id="tp" placeholder="TP (price)" style="width:120px"/>
      <select id="execMode">
        <option value="auto">AUTO</option>
        <option value="manual">MANUAL</option>
      </select>
      <button id="exitTradeBtn" class="btn">Exit Trade</button>
      <div id="signalList" style="max-height:220px; overflow:auto; margin-top:10px"></div>
    </div>
  </div>

  <!-- Right Section for Assistant -->
  <div class="right">
    <div class="card">
      <div style="display:flex; gap:12px; align-items:center;">
        <div style="width:56px;height:56px; border-radius:50%; background: linear-gradient(90deg,#7c5cff,#ff758c); display:flex; align-items:center; justify-content:center; font-weight:700;">L</div>
        <div style="flex:1;">
          <div style="font-weight:700">Lumina</div>
          <div class="small">AI Assistant â€” voice & camera</div>
        </div>
        <button id="openLumina" class="btn">Open</button>
      </div>
    </div>

    <div class="card">
      <strong>Connect Bridge</strong>
      <div class="small">Enter secure Bridge (server-side) to execute live trades</div>
      <input id="bridgeUrl" placeholder="Bridge URL (https://...)" />
      <input id="bridgeUser" placeholder="Bridge user" />
      <input id="bridgePass" placeholder="Bridge pass" type="password" />
      <button id="bridgeConnect" class="btn">Connect Bridge</button>
    </div>

    <div class="card">
      <strong>Data Provider</strong>
      <div class="small">TwelveData API Key (optional, recommended for historical data)</div>
      <input id="tdKey" placeholder="API key (optional)" />
    </div>

    <div class="card">
      <strong>Quick demo actions</strong>
      <button id="addMarkerBuy" class="btn">Add BUY marker</button>
      <button id="addMarkerSell" class="btn">Add SELL marker</button>
    </div>

    <div class="card">
      <strong>Notes</strong>
      <div class="small">This frontend is a POC. For production, use server-side Bridge + MT5 EA with secure keys.</div>
    </div>
  </div>
</div>

<!-- Lumina Assistant Panel -->
<button id="luminaBtn">Lumina</button>
<div id="luminaPanel" aria-hidden="true">
  <div style="display:flex; justify-content:space-between; align-items:center;">
    <h3>Lumina â€” Assistant</h3>
    <button id="luminaClose" class="btn">Close</button>
  </div>

  <div>
    <input id="luminaInput" placeholder="Ask Lumina..." />
    <button id="luminaAsk" class="btn">Analyze</button>
    <button id="luminaMic" class="btn">ðŸŽ¤</button>
    <button id="luminaCam" class="btn">Camera</button>
  </div>

  <div id="luminaChat" style="margin-top:12px;max-height:400px;overflow:auto;"></div>
</div>

<footer class="note">Lumina POC â€” demo use only. For production: use Bridge + MT5 EA securely.</footer>

<script>
// *** JavaScript goes here to handle Auto Mode, Manual Mode, Exit Trade, Signals, EA integration, etc. ***
</script>

</body>
</html>
